{% extends "base.html" %}

{% block content %}
<h1>{{ title }}</h1>

    <div class="readme">
        {% if datapkg.description %}
            <h4>{{ datapkg.description }}</h4>
        {% endif %}
        {{ datapkg.readme }}

        {% for d in datapkg.datafiles %}
          <h5>{{ d.name }}</h5>
          <dl>
          {% for f in d.schema.fields %}
           <dd>{{ f.name }}</dd><dt>{{ f.description }}</dt>
          {% endfor %}
        {% endfor %}
    </div>

    <div class="more-info">
      <p>Versão: {{ datapkg.version }}</p>
      <p>Fontes:</p>
      <ul>
        {% for s in datapkg.sources %}
        <li><a href="{{ s.web }}">{{ s.name }}</a></li>
        {% endfor %}
      <p>Licença: {{ datapkg.license }}</p>
      <p>Última atualização: {{ datapkg.last_updated }}</p>
      <p>Repositório Git: <em>{{ datapkg.repository }}</em></p>

    <ul class="datafiles">
        <li><h4>Ficheiros</h4></li>
        {% for d in datapkg.datafiles %}
            <li class="box">
                <span>{{ d.name }}</span>
                <a href="/{{ d.basename }}">CSV</a>
                <a href="/{{ d.basename.replace(".csv", ".json") }}">JSON</a>
            </li>
        {% endfor %}
    </ul>
{% endblock content %}
